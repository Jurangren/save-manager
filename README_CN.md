# 🎮 Playnite 存档管理器 (Save Manager)

[English](README.md) | **[中文]**

这是一个专为 Playnite 游戏库设计的**存档管理插件**。它让你能够轻松备份、还原和管理 PC 游戏的存档，再也不用担心存档丢失或损坏！

## ✨ 核心功能

- **⚡ 智能路径识别**：自动识别存档路径，游戏目录移动后自动适配
- **📦 一键备份**：支持快速备份，并可添加备注（如"通关前"、"Boss战前"）
- **↩️ 安全还原**：随时将存档恢复到之前的任意状态
- **🚫 还原排除项**：还原时可排除特定文件（如全局设置、读过的文本记录、画质设置等）
- **📂 便携化设计**：备份文件支持随游戏目录移动，相对路径自动识别
- **📤 导入导出**：支持导入/导出存档路径配置和外部 ZIP 备份包
- **🌍 全局配置**：支持导出/导入所有配置，方便跨机器备份
- **🧹 自动清理**：删除最后一个备份时，自动清理残留的空文件夹

## 📸 截图预览

### 主界面
![主界面](doc/img/Main_zh.png)

### 右键菜单
![右键菜单](doc/img/Menu_zh.png)

## 📖 使用指南

### 1. 配置存档路径

1. 选中游戏，右键点击 **"存档管理-SaveManager"** → **"存档管理"**
2. 点击 **"📁 添加文件夹"** 或 **"📄 Add File"**
3. 选择你的游戏存档位置（通常是 `Documents\My Games\游戏名` 或游戏安装目录下的 `Save` 文件夹）
   - *提示：插件会自动检测并优化路径*

![存档路径配置](doc/img/Main_zh.png)

### 2. 创建备份

- **方法 A**：在管理器界面点击 **"📦 创建备份"** 按钮
- **方法 B**：在 Playnite 游戏列表右键一款游戏 → **"存档管理-SaveManager"** → **"快速备份"**

### 3. 还原存档

1. 在管理器界面中，从备份列表选中你想恢复的备份
2. 点击 **"↩️ 还原"** 按钮
3. 确认覆盖即可

或者使用右键菜单：
- 右键游戏 → **"存档管理-SaveManager"** → **"还原备份"** → 从最近9个备份中选择一个

### 4. 还原排除项（进阶）

如果你希望在还原存档时**保留**某些本地设置（如分辨率、按键绑定、视觉小说的已读跳转记录等）：

1. 在“存档路径配置”下方找到 **"🚫 还原排除项"** 区域
2. 点击 **"📁 添加文件夹"** 或 **"📄 添加文件"**
3. 选择你想保护的文件（例如：`config.ini`, `global.dat`, `system.sav` 等）
4. 之后还原任何备份时，这些文件都会保持当前状态，不会被备份中的旧文件覆盖。

### 5. 其他功能

- **修改备注**：备份后想改备注？直接在列表中点击 **"✏️"** 按钮
- **导入/导出配置**：使用界面下方的 **"📥/📤"** 按钮可以分享你的配置给朋友
- **全局管理**：在 **Playnite 设置** → **扩展** → **Save Manager** 中可以进行全局导入/导出及打开插件数据目录

## 🛠️ 安装方法

### 从 Playnite 插件商店安装（推荐）
1. 打开 Playnite → 按 `F9` 或进入 **扩展** → **浏览**
2. 搜索 **"Save Manager"**
3. 点击 **安装**
4. 重启 Playnite

### 手动安装
1. 从 [Releases](../../releases) 下载最新的 `.pext` 插件文件
2. 拖入 Playnite 窗口或通过 **扩展** → **从文件安装**
3. 重启 Playnite

## 🌐 本地化

插件支持多种语言：
- **English** (en_US)
- **简体中文** (zh_CN)

语言会根据 Playnite 设置自动切换。

## ⚙️ 设置选项

进入 **Playnite 设置** → **扩展** → **Save Manager**：

- **自定义备份目录**：设置自定义备份位置（默认：插件数据文件夹）
- **游戏结束时自动备份**：游戏退出时自动创建备份
- **最大备份数量**：每个游戏的最大备份数（0 = 不限制）
- **全局管理**：支持导出/导入包含配置和备份在内的完整 ZIP 包

## 📁 文件结构

```
%AppData%\Playnite\ExtensionsData\SaveManager\
├── config.json       # 所有游戏的存档路径配置及备份记录信息
├── settings.json     # 插件全局设置（自动备份等）
└── Backups\          # 存档数据集
    └── {游戏ID}\
        └── Backup_年月日_时分秒.zip
```

## 🤝 贡献

欢迎贡献！你可以：
- 在 [Issues](../../issues) 中报告 Bug 或提出功能建议
- 提交 Pull Request
- 帮助翻译成其他语言

## 📄 许可证

本项目采用 MIT 许可证。

---

*用 ❤️ 为 Playnite 玩家打造*
